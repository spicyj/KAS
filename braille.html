<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Math braille converter</title>

    <style>
    textarea {
        box-sizing: border-box;
        font-size: 36px;
        left: 0;
        height: 100%;
        position: absolute;
        top: 0;
        width: 50%;
    }
    #output {
        left: 50%;
    }
    </style>

    <!-- Include Underscore -->
    <script src="lib/underscore.js"></script>

    <!-- Include KAS -->
    <script src="src/parser.js"></script>
    <script src="src/nodes.js"></script>
    <script src="src/compare.js"></script>
</head>
<body>

<div>
<textarea id="input">(x-3^2)^(1/3) - 4/7
2x - 4/3</textarea>
<textarea id="output" readonly></textarea>
</div>

<script type="text/javascript">
(function(KAS) {
    var parse = function(input, options) {
        return KAS.parse(input, options).expr;
    };

    var input = document.getElementById("input");
    var output = document.getElementById("output");
    input.addEventListener("input", update, false);

    function update() {
        var lines = input.value.split("\n");
        output.value = lines.map(function(line) {
            var parsed = parse(line);
            if (parsed != null) {
                return parsed.tex();
            } else {
                return "";
            }
        }).join("\n");
    }

    output.addEventListener("focus", function() {
        setTimeout(function() {
            output.select();
        }, 0);
    }, false);

    update();
})(KAS);
</script>

</body>
</html>
